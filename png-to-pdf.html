<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PNG to PDF — Minimal Tool</title>
  <style>
    :root {
      --green: #0f4d3a;
      --white: #ffffff;
      --muted: #cfe6db;
      --bg: #062b22;
      --radius: 12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body {
      margin: 0;
      background: linear-gradient(180deg, var(--bg), #04251f 80%);
      color: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 28px;
    }
    .card {
      width: 100%;
      max-width: 820px;
      background: linear-gradient(180deg, rgba(15, 77, 58, 0.95), rgba(10, 50, 40, 0.95));
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(3, 18, 14, 0.6);
      padding: 28px;
      box-sizing: border-box;
    }
    header {display: flex; align-items: center; gap: 16px; margin-bottom: 18px;}
    .logo {width: 54px; height: 54px; border-radius: 10px; background: var(--white);
      display: flex; align-items: center; justify-content: center; color: var(--green);
      font-weight: 700; font-size: 20px;}
    h1 {font-size: 20px; margin: 0;}
    p.lead {margin: 4px 0 0; color: var(--muted); font-size: 13px;}
    .drop {
      margin-top: 18px; border: 2px dashed rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.02); border-radius: 10px;
      padding: 18px; display: flex; gap: 12px; align-items: center;
      justify-content: space-between; flex-wrap: wrap;
    }
    .drop .hint {font-size: 13px; color: var(--muted);}
    .btn {
      background: var(--white); color: var(--green); border: none;
      padding: 10px 14px; border-radius: 10px; cursor: pointer;
      font-weight: 600; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
      margin-top: 12px;
    }
    input[type=file] {display: none;}
    ul.file-list {list-style: none; padding: 0; margin: 14px 0 0; max-height: 240px; overflow: auto;}
    ul.file-list li {display: flex; justify-content: space-between; align-items: center;
      padding: 10px; border-radius: 8px; background: rgba(255, 255, 255, 0.02); margin-bottom: 8px;}
    .fname {font-size: 14px;}
    .fsize {font-size: 12px; color: var(--muted);}
    .actions {display: flex; gap: 12px; margin-top: 16px;}
    footer {margin-top: 18px; font-size: 12px; color: var(--muted); display: flex; justify-content: space-between; align-items: center;}
    @media (max-width:520px){.card{padding:16px}.logo{width:44px;height:44px;font-size:16px}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <header>
      <div class="logo">IP</div>
      <div>
        <h1>PNG to PDF</h1>
        <p class="lead">Convert one or multiple PNG images into a single PDF.</p>
      </div>
    </header>

    <div class="drop" id="drop">
      <div>
        <strong class="hint">Drop PNG files here</strong>
        <div class="hint">or click to select images</div>
      </div>
      <label class="btn" for="fileInput">Choose Images</label>
      <input id="fileInput" type="file" accept="image/png" multiple />
    </div>

    <ul class="file-list" id="fileList" aria-live="polite"></ul>

    <div class="actions">
      <button id="convertBtn" class="btn" disabled>Convert to PDF</button>
      <button id="clearBtn" class="btn">Clear</button>
    </div>

    <div id="output" style="margin-top:16px"></div>

    <footer>
      <div>All processing happens in your browser.</div>
      <div>Theme • dark green</div>
    </footer>
  </div>

  <!-- PDF-lib library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  <script>
    const fileInput = document.getElementById('fileInput');
    const drop = document.getElementById('drop');
    const fileListEl = document.getElementById('fileList');
    const convertBtn = document.getElementById('convertBtn');
    const clearBtn = document.getElementById('clearBtn');
    const output = document.getElementById('output');

    let imageFiles = [];

    function refreshList() {
      fileListEl.innerHTML = '';
      if (imageFiles.length > 0) {
        imageFiles.forEach(f => {
          const li = document.createElement('li');
          li.innerHTML = `<div><div class="fname">${f.name}</div><div class="fsize">${(f.size/1024).toFixed(1)} KB</div></div>`;
          fileListEl.appendChild(li);
        });
      }
      convertBtn.disabled = imageFiles.length === 0;
    }

    fileInput.addEventListener('change', e => {
      imageFiles = Array.from(e.target.files);
      refreshList();
    });

    drop.addEventListener('dragover', e => e.preventDefault());
    drop.addEventListener('drop', e => {
      e.preventDefault();
      imageFiles = Array.from(e.dataTransfer.files).filter(f => f.type === 'image/png');
      refreshList();
    });

    clearBtn.addEventListener('click', () => {
      imageFiles = [];
      refreshList();
      output.innerHTML = '';
    });

    convertBtn.addEventListener('click', async () => {
      if (imageFiles.length === 0) return;
      output.innerHTML = 'Processing...';

      try {
        const pdfDoc = await PDFLib.PDFDocument.create();

        for (const file of imageFiles) {
          const arrayBuffer = await file.arrayBuffer();
          const pngImage = await pdfDoc.embedPng(arrayBuffer);
          const { width, height } = pngImage.scale(1);

          const page = pdfDoc.addPage([width, height]);
          page.drawImage(pngImage, {
            x: 0, y: 0, width: width, height: height
          });
        }

        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'images.pdf';
        link.textContent = 'Download PDF';
        link.className = 'btn';
        output.innerHTML = '';
        output.appendChild(link);

      } catch (err) {
        output.innerHTML = 'Error: ' + err.message;
      }
    });

    refreshList();
  </script>
</body>
</html>
